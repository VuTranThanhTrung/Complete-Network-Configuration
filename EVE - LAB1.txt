pc1: ip 10.1.1.1/24  10.1.1.100
pc2: ip 10.1.1.2/24  10.1.1.100
pc3: ip 20.1.1.1/24  20.1.1.100
pc4: ip 20.1.1.2/24  20.1.1.100
pc5: ip 30.1.1.1/24  10.1.1.100
pc6: ip 30.1.1.2/24  10.1.1.100
pc7: ip 40.1.1.1/24  20.1.1.100
pc8: ip 40.1.1.2/24  40.1.1.100


**********AC-SW1
vtp domain MyCompany
vtp mode client
vtp password 123456

int range e0/2-3
 sw mode acc
 sw acc vlan 10
 spanning-tree portfast
 spanning-tree bpduguard enable
int range e0/0-1
 sw trunk encap dot1q
 sw mode trunk

**********AC-SW2
vtp domain MyCompany
vtp mode client
vtp password 12456

int range e0/2-3
 sw mode acc
 sw acc vlan 20
 spanning-tree portfast
 spanning-tree bpduguard enable
 
int range e0/0-1
 sw trunk encap dot1q
 sw mode trunk


**********AC-SW3
vtp domain MyCompany
vtp mode client
vtp password 123456

int range e0/2-3
 sw mode acc
 sw acc vlan 30
 spanning-tree portfast
 spanning-tree bpduguard enable
int range e0/0-1
 sw trunk encap dot1q
 sw mode trunk

 
**********AC-SW4
vtp domain MyCompany
vtp mode client
vtp password 123456

int range e0/2-3
 sw mode acc
 sw acc vlan 40
 spanning-tree portfast
 spanning-tree bpduguard enable
int range e0/0-1
 sw trunk encap dot1q
 sw mode trunk


**********MLS1:
vtp domain MyCompany
vtp mode Server
vtp password 123456

vlan 10
 name HR
vlan 20
 name Sales
vlan 30
 name IT
vlan 40
 name Finance
ex

int range e0/1-3,e1/0
 sw trunk encap dot1q
 sw mode trunk

inter vlan 10
 ip add	10.1.1.254 255.255.255.0
 no shutdown
inter vlan 20
 ip add	20.1.1.254 255.255.255.0
 no shutdown
inter vlan 30
 ip add	30.1.1.254 255.255.255.0
 no shutdown
inter vlan 40
 ip add	40.1.1.254 255.255.255.0
 no shutdown

int range e1/1-3,e2/0
 shutdown
 no switchport
 channel-group 10 mode active
 no shutdown

int port-channel 10
 ip add 11.1.1.1 255.255.255.0

inter vlan 10
 standby 10 ip 10.1.1.100
 standby 10 priority 110
 standby 10 preempt delay 60
 standby 10 track  e0/1 20
inter vlan 20
 standby 20 ip 20.1.1.100
 standby 20 priority 110
 standby 20 preempt delay 60
 standby 20 track  e0/2 20
inter vlan 30
 standby 30 ip 30.1.1.100
 standby 30 priority 100
 standby 30 preempt delay 60
 standby 30 track e0/3 20
inter vlan 40
 standby 40 ip 40.1.1.100
 standby 40 priority 100
 standby 40 preempt delay 60
 standby 40 track e1/0 20

spanning-tree mode pvst
spanning-tree vlan 10,20 priority 24576   
spanning-tree vlan 30,40 priority 32768  

int e0/0 
 no switchport
 ip add 12.1.1.1 255.255.255.0
 no shutdown

router ospf 100
 net 10.1.1.0  0.0.0.255 area 1
 net 20.1.1.0  0.0.0.255 area 1
 net 30.1.1.0  0.0.0.255 area 1
 net 40.1.1.0  0.0.0.255 area 1
 net 12.1.1.0  0.0.0.255 area 1
 net 11.1.1.0  0.0.0.255 area 1

ip routing

**********MLS2:
vtp domain MyCompany
vtp mode client
vtp password 123456

int range e0/1-3,e1/0
 sw trunk encap dot1q
 sw mode trunk

inter vlan 10
 ip add	10.1.1.253 255.255.255.0
 no shutdown
inter vlan 20
 ip add	20.1.1.253 255.255.255.0
 no shutdown
inter vlan 30
 ip add	30.1.1.253 255.255.255.0
 no shutdown
inter vlan 40
 ip add	40.1.1.253 255.255.255.0
 no shutdown

int range e1/1-3,e2/0
 shutdown
 no switchport
 channel-group 10 mode active
 no shutdown
int port-channel 10
 ip add 11.1.1.2 255.255.255.0

inter vlan 10
 standby 10 ip 10.1.1.100
 standby 10 priority 100
 standby 10 preempt delay 60
 standby 10 track interface e0/1 20
inter vlan 20
 standby 20 ip 20.1.1.100
 standby 20 priority 100
 standby 20 preempt delay 60
 standby 20 track interface e0/2 20
inter vlan 30
 standby 30 ip 30.1.1.100
 standby 30 priority 110
 standby 30 preempt delay 60
 standby 30 track interface e0/3 20
inter vlan 40
 standby 40 ip 40.1.1.100
 standby 40 priority 110
 standby 40 preempt delay 60
 standby 40 track interface e1/0 20

spanning-tree mode pvst
spanning-tree vlan 30,40 priority 24576   
spanning-tree vlan 10,20 priority 32768  

int e0/0
 no switchport
 ip add 13.1.1.1 255.255.255.0
 no shutdown
router ospf 100
 net 10.1.1.0  0.0.0.255 area 1
 net 20.1.1.0  0.0.0.255 area 1
 net 30.1.1.0  0.0.0.255 area 1
 net 40.1.1.0  0.0.0.255 area 1
 net 13.1.1.0  0.0.0.255 area 1
 net 11.1.1.0  0.0.0.255 area 1
ip routing

ip dhcp pool VLAN10
 network 10.1.1.0  255.255.255.0
 default-router 10.1.1.253 
 dns-server 8.8.8.8
ip dhcp pool VLAN20
 network 20.1.1.0  255.255.255.0
 default-router 20.1.1.253 
 dns-server 8.8.8.8
ip dhcp pool VLAN30
 network 30.1.1.0  255.255.255.0
 default-router 30.1.1.253 
 dns-server 8.8.8.8
ip dhcp pool VLAN40
 network 40.1.1.0  255.255.255.0
 default-router 40.1.1.253 
 dns-server 8.8.8.8

ip dhcp excluded-address 10.1.1.254
ip dhcp excluded-address 20.1.1.254
ip dhcp excluded-address 30.1.1.254
ip dhcp excluded-address 40.1.1.254

ip dhcp excluded-address 10.1.1.253
ip dhcp excluded-address 20.1.1.253
ip dhcp excluded-address 30.1.1.253
ip dhcp excluded-address 40.1.1.253

ip dhcp excluded-address 10.1.1.100
ip dhcp excluded-address 20.1.1.100
ip dhcp excluded-address 30.1.1.100
ip dhcp excluded-address 40.1.1.100

int range e0/1-3,e1/0,e0/0,e1/1-3,e2/0
 duplex full
**********R1
int e0/1
ip address 12.1.1.2 255.255.255.0
no shutdown
ex
int e0/2
ip address 13.1.1.2 255.255.255.0
no shutdown
ex
int e0/0
ip address 1.1.1.1 255.255.255.252
no shutdown
ex

router ospf 100
net 12.1.1.0 0.0.0.255 area 1
net 13.1.1.0 0.0.0.255 area 1
net 1.1.1.0 0.0.0.3 area 1
default-information originate
ex
ip route 0.0.0.0 0.0.0.0 1.1.1.2

access-list 10 permit any
ip nat inside source list 10 interface e0/0 overload
int e0/0
ip nat outside 
ex
int r e0/1-2
ip nat inside 
ex
interface range e0/1-2
 duplex full
 no shutdown

router eigrp 20
 net 192.168.10.0  0.0.0.255
 net 12.1.1.0
 net 13.1.1.0
**********INTERNET
int l1
 ip add 8.8.8.8  255.255.255.0
int e0/0
 ip add 1.1.1.2 255.255.255.252
 no shutdown
int e0/1
 ip add 2.2.2.1  255.255.255.252
 no shutdown

**************R2
int e0/0
 ip add 2.2.2.2  255.255.255.252
 no shutdown
int e0/1
 ip add 50.1.1.2  255.255.255.0
 no shutdown

router ospf 10
 net 50.1.1.0  0.0.0.255 area 1
 def-inf origi

ip route 0.0.0.0  0.0.0.0  e0/0 2.2.2.1
access-list 1 permit any
ip nat inside source list 1 inter e0/0 overload
int e0/0
 ip nat outside
int e0/1
 ip nat inside

router eigrp 20
 net 192.168.10.0  0.0.0.255
 net 50.1.1.0 

**********DSW*
int e0/0
 no switchport
 no shutdown
 ip add 50.1.1.1  255.255.255.0
router ospf 10
 net 50.1.1.0   0.0.0.255 area 1
*********GRE VPN*************
R1:
int tunnel 1
 ip add 192.168.10.1  255.255.255.0
 tunnel source 1.1.1.1
 tunnel destination 2.2.2.2

R2:
int tunnel 2
 ip add 192.168.10.2  255.255.255.0
 tunnel source 2.2.2.2
 tunnel destination 1.1.1.1







